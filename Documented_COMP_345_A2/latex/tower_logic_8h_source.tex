\doxysection{tower\+Logic.\+h}
\hypertarget{tower_logic_8h_source}{}\label{tower_logic_8h_source}\index{C:/Users/gevor/source/repos/COMP\_345\_A2/towerLogic.h@{C:/Users/gevor/source/repos/COMP\_345\_A2/towerLogic.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ TOWER\_LOGIC\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ TOWER\_LOGIC\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}raylib.h"{}}\ \ \textcolor{comment}{//\ For\ Vector2}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}critterLogic.h"{}}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{comment}{//\ Enum\ to\ distinguish\ tower\ types}}
\DoxyCodeLine{00011\ \textcolor{keyword}{enum\ class}\ TowerType\ \{}
\DoxyCodeLine{00012\ \ \ \ \ BASIC,}
\DoxyCodeLine{00013\ \ \ \ \ SPLASH,}
\DoxyCodeLine{00014\ \ \ \ \ SLOW}
\DoxyCodeLine{00015\ \};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ Bullet\ structure}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00020\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_bullet}{Bullet}}\ \{}
\DoxyCodeLine{00021\ \ \ \ \ Vector2\ position;}
\DoxyCodeLine{00022\ \ \ \ \ Vector2\ velocity;}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{int}\ damage;}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordtype}{bool}\ active;}
\DoxyCodeLine{00025\ \};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ Tower\ Base\ Class}}
\DoxyCodeLine{00029\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }Tower\ :\ \textcolor{keyword}{public}\ ObserverVec\ \{}
\DoxyCodeLine{00031\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00032\ \ \ \ \ std::string\ name;}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{int}\ level;}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{int}\ cost;}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{int}\ refundValue;}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{int}\ range;\ \ \ \ \ \ \textcolor{comment}{//\ In\ grid\ cells}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{int}\ power;}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{float}\ rateOfFire;\ \ \textcolor{comment}{//\ Shots\ per\ second}}
\DoxyCodeLine{00039\ \ \ \ \ Vector2\ position;\ \textcolor{comment}{//\ Tower\ position}}
\DoxyCodeLine{00040\ \ \ \ \ std::vector<Bullet>\ bullets;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ New:\ cooldown\ timer\ (in\ seconds)\ to\ control\ rate\ of\ fire.}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{float}\ cooldownTimer;}
\DoxyCodeLine{00045\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00046\ \ \ \ \ Tower(\textcolor{keyword}{const}\ std::string\&\ name,\ \textcolor{keywordtype}{int}\ cost,\ \textcolor{keywordtype}{int}\ refundValue,\ \textcolor{keywordtype}{int}\ range,\ \textcolor{keywordtype}{int}\ power,\ \textcolor{keywordtype}{float}\ rateOfFire);}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{virtual}\ \string~Tower();}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{void}\ Update()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00050\ \ \ \ \ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ Position\ setters/getters}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{void}\ setPosition(Vector2\ pos);}
\DoxyCodeLine{00053\ \ \ \ \ Vector2\ getPosition()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00054\ \ \ \ \ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ Pure\ virtual\ functions\ for\ behavior}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ attack()\ =\ 0;}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{virtual}\ TowerType\ getTowerType()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ Upgrade\ and\ sell\ methods}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ upgrade();}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ sell()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//\ Getters\ for\ common\ attributes}}
\DoxyCodeLine{00064\ \ \ \ \ std::string\ getName()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{int}\ getLevel()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{int}\ getCost()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{int}\ getRefundValue()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{int}\ getRange()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{int}\ getPower()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{float}\ getRateOfFire()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ }
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Bullet\ Functionality\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ Spawn\ a\ bullet\ aimed\ at\ a\ target\ position.}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ shootAt(Vector2\ target);}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ Update\ all\ bullets\ (move\ them,\ mark\ inactive\ if\ needed)\ and\ update\ cooldownTimer.}}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{void}\ updateBullets();}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ Access\ bullets\ for\ drawing.}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ the\ tower\ is\ ready\ to\ shoot\ based\ on\ its\ rateOfFire.}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{bool}\ readyToShoot()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{//\ Resets\ the\ internal\ cooldown\ timer.}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{void}\ resetCooldown();}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<Bullet>\&\ getBullets()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00089\ \};}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00092\ \textcolor{comment}{//\ Derived\ Towers}}
\DoxyCodeLine{00093\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00094\ \textcolor{keyword}{class\ }BasicTower\ :\ \textcolor{keyword}{public}\ Tower\ \{}
\DoxyCodeLine{00095\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00096\ \ \ \ \ BasicTower();}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ attack()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keyword}{virtual}\ TowerType\ getTowerType()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00099\ \};}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{keyword}{class\ }SplashTower\ :\ \textcolor{keyword}{public}\ Tower\ \{}
\DoxyCodeLine{00102\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00103\ \ \ \ \ SplashTower();}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ attack()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keyword}{virtual}\ TowerType\ getTowerType()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00106\ \};}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{keyword}{class\ }SlowTower\ :\ \textcolor{keyword}{public}\ Tower\ \{}
\DoxyCodeLine{00109\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00110\ \ \ \ \ SlowTower();}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ attack()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{virtual}\ TowerType\ getTowerType()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00113\ \};}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00116\ \textcolor{comment}{//\ TowerManager\ Class}}
\DoxyCodeLine{00117\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00118\ \textcolor{keyword}{class\ }TowerManager\ :\ \textcolor{keyword}{public}\ ObservableVec\ \{}
\DoxyCodeLine{00119\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00120\ \ \ \ \ std::vector<Tower*>\ towers;}
\DoxyCodeLine{00121\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_critter_manager}{CritterManager}}*\ critterManager;}
\DoxyCodeLine{00124\ \ \ \ \ TowerManager();}
\DoxyCodeLine{00125\ \ \ \ \ \string~TowerManager();}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{comment}{//\ Add\ or\ remove\ towers}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordtype}{void}\ addTower(\mbox{\hyperlink{class_tower}{Tower}}*\ tower);\ \textcolor{comment}{//\ Attach}}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordtype}{void}\ removeTower(\textcolor{keywordtype}{int}\ index);\ \textcolor{comment}{//\ Detach}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ Call\ attack\ and\ update\ bullets\ on\ all\ towers}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordtype}{void}\ updateTowers(\textcolor{keywordtype}{int}\ cellSize);\ \textcolor{comment}{//\ Notify}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{comment}{//\ Upgrade\ or\ sell\ a\ specific\ tower}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordtype}{void}\ upgradeTower(\textcolor{keywordtype}{int}\ index);}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordtype}{int}\ sellTower(\textcolor{keywordtype}{int}\ index);}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{//\ Getter\ to\ access\ the\ towers\ (for\ UI\ rendering)}}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<Tower*>\&\ getTowers()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00140\ \ \ \ \ }
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ Debug:\ print\ info\ about\ towers}}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{void}\ printTowers()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00144\ \};}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ TOWER\_LOGIC\_H}}

\end{DoxyCode}
